<!DOCTYPE html>
<html>
<head>
    <title>Add Book â€“ ReadShelf</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        function toggleFields() {
            const status = document.getElementById("status").value;
            const moodField = document.getElementById("mood-field");
            const ratingField = document.getElementById("rating-field");
            const reviewField = document.getElementById("review-field");

            if (status === "read") {
                moodField.style.display = "block";
                ratingField.style.display = "block";
                reviewField.style.display = "block";

                document.getElementById("mood").required = true;
                document.getElementById("rating").required = true;
            } else {
                moodField.style.display = "none";
                ratingField.style.display = "none";
                reviewField.style.display = "none";

                document.getElementById("mood").required = false;
                document.getElementById("rating").required = false;
            }
        }

        window.onload = toggleFields;
    </script>
</head>
<body>
    <h1>âž• Add a Book to Your Shelf</h1>
    <form method="POST">
        <label>Title:</label><br>
        <input type="text" name="title" required><br><br>

        <label>Author:</label><br>
        <input type="text" name="author" required><br><br>

        <div id="mood-field">
            <label>Mood:</label><br>
            <select name="mood" id="mood">
                {% for mood in mood_options %}
                    <option value="{{ mood }}">{{ mood }}</option>
                {% endfor %}
            </select><br><br>
        </div>

        <div id="rating-field">
            <label>Rating (1â€“5):</label><br>
            <input type="number" name="rating" id="rating" min="1" max="5"><br><br>
        </div>

        <div id="review-field">
            <label>Review (optional):</label><br>
            <textarea name="review" id="review" rows="4" cols="40"></textarea><br><br>
        </div>

        <label>Status:</label><br>
        <select name="status" id="status" onchange="toggleFields()">
            <option value="read">ðŸ“š Read</option>
            <option value="reading">ðŸ“– Currently Reading</option>
            <option value="wishlist">ðŸ“’ Wishlist</option>
        </select><br><br>

        <button type="submit">Add Book</button>
    </form>

    <br><a href="/">â¬… Back to Shelf</a>
</body>
</html>
